% Intended LaTeX compiler: pdflatex
\documentclass[a4paper,titlepage]{jsarticle}
                                \usepackage{caption}
                \usepackage[dvipdfmx]{graphicx}
\author{小高 拓海}
\date{\today}
\title{実験1}
\begin{document}

\maketitle

\section{目的}
\label{sec:org5eeadbd}
本実験では、「シーケンス制御(sequential Control)」の拡張実験として、電磁リレーによって構成されるPLC(Programmable Logic Controller)を用い、それの制御プログラミングの根本となるラダープログラミングによるスイッチやライトの制御、自己保持回路やカウンタ、タイマの制御などの基本について学ぶ。それらの実験を通し、数ある制御方法の一つであるPLCの利点・欠点を理解することを目的とする。

\section{使用機器}
\label{sec:org81d43f4}
本実験における使用機器を表\ref{tab:orgc51b9e5}に示す。

\begin{table}[htbp]
\caption{\label{tab:orgc51b9e5}
使用機器}
\centering
\begin{tabular}{|c|c|c|c|}
\hline
機器名 & メーカー名 & 型番 & シリアルNo.\\
\hline
\hline
電源 & - & - & 6\\
PLCユニット & キーエンス & KV-1000 & 6\\
40ピンフラットケーブル & - & - & -\\
プラスドライバ & - & - & -\\
USBケーブル & - & typeA - typeB & -\\
入出力装置(スイッチ-LEDユニット) & - & - & 6\\
\hline
\end{tabular}
\end{table}

\section{前提知識}
\label{sec:org7342961}
\subsection{PLC(KV-1000)}
\label{sec:orgcb8e5df}
2004年にキーエンス社から発売されたPLC装置である。販売開始当初は10万円程度で販売されていたが、現在は後継モデルが開発・販売されているため入手困難な商品である。

基本スペックは
\begin{itemize}
\item 入力点数：16 点
\item 出力点数：8 点
\item 動作電源：DC24 [V]
\end{itemize}
となっている。

プログラムはキーエンス専用ソフトウェア(KV-STUDIO)を用いてラダー図を記述し、USBケーブルを用いて転送を行う。転送されたプログラムは内部メモリに保存されるため、PCにから切り離した駆動が可能である。

\subsection{ラダー図}
\label{sec:org49121d5}

\section{実験}
\label{sec:orge4647d9}
本実験において行った実験項目のうち、主要なものについて概要説明と実際に作成したラダー図を示す。

\subsection{駐車場 満車・空車 管理システム}
\label{sec:orgad6e046}
駐車場の空車状況を示すシステムをシミュレーションしたものである。SW1-3を駐車スペースとし、押されている状態を車がいる状況と定義する。SW1-3の全てが押されているとき、空き駐車スペースが存在しないため、満車を示すLED2(黄色)が点灯する。それ以外の場合は空車を示すLED1(青色)が点灯する。

このシステムを実装したラダー図を図4.1に示す。

\subsection{早押しボタンシステム(4回路)}
\label{sec:org73a3c64}
SW1-4をクイズ番組の早押しボタンとしたシミュレーションシステムである。いずれかのスイッチを押すと、それぞれ対応したLED1-4が点灯する。それと同時に、押されたスイッチ以外の入力を受け付けなくなる。それにより、一番早く押されたスイッチひとつのみが動作する状況を作ることができる。

このシステムを実装したラダー図を図4.2に示す。

\subsection{順序回路(3回路)}
\label{sec:org47e5d96}
SW1-3を"1, 2, 3"の順で押すと、対応したLED1-3が順に点灯する。前提となるスイッチが押されていない場合は反応しない。例えば、SW1が押されていない(LED1が消灯中)にSW2、3を押しても反応しない。SW1を押した時点でLED1が点灯し、SW2が有効になる。

このシステムを実装したラダー図を図4.3に示す。

\subsection{完全順序回路(4回路)}
\label{sec:org5023776}
\ref{sec:org47e5d96}の要件に加え、誤ったスイッチを押した場合にはLEDは全て消灯し、SW1のみ有効な状態(初期状態)に戻る。さらに、用いるスイッチ、LEDがそれぞれ一つ増加し4回路となっている。

このシステムを実装したラダー図を図4.4に示す。

\subsection{オンディレイタイマ(5s)}
\label{sec:org31e7265}
このシステムは、タイマの動作について学ぶための簡易的なプログラムの一つである。SW1を5秒間押し続けるとLED1が点灯する。今回用いたPLC内蔵のタイマは最小カウント単位は0.1[s]となっている。よって、カウントが50回行われた時点で5秒経過とみなすことができる。

このシステムを実装したラダー図を図4.5に示す。

\subsection{オフディレイタイマ(3s)}
\label{sec:orgc8f8023}
このシステムは、\ref{sec:org31e7265}と同じくタイマの動作について学ぶための簡易的なプログラムである。SW1を押すとLED1が点灯し、SW1を離すと3秒後にLED1が消灯する。

このシステムを実装したラダー図を図4.6に示す。

\subsection{カウンタ 連続}
\label{sec:org18dbb5b}
このシステムは、カウンタの動作について学ぶための簡易的なプログラムの一つである。
SW9を押した回数をカウンタ51\textasciitilde{}58までを用いてカウントし、カウント回数に応じてLED1-8を順次点灯させていく。

このシステムを実装したラダー図を図4.7に示す。

\subsection{カウンタ 連続(消去)}
\label{sec:orgb8238f1}
このシステムは、カウンタの動作について学ぶための簡易的なプログラムの一つである。
SW9を押した回数をカウンタ51\textasciitilde{}59までを用いてカウントし、カウント回数に応じてLED1-8を順次点灯させていく。9回目には8回目までで全点灯しているLEDを全て消灯させる。

このシステムを実装したラダー図を図4.8に示す。

\subsection{フリッカー(2:1)}
\label{sec:org65c01fd}
このシステムは、SW9を1度押すことによって起動し、タイマー0、1を活用することでLED2は2秒点灯と1秒消灯を繰り返す。

このシステムを実装したラダー図を図4.9に示す。

\subsection{自動販売機}
\label{sec:org214f7a7}
5種類の商品が並べられた自動販売機の動作をシミュレーションしたシステムである。商品価格は一律50円とし、SW9を1度押すたび10円が自動販売機内に投入されると定義し、50円分入金されたタイミングでLED1-5が点灯する。その後、SW1-5のいずれかを押すと対応したLEDを残し他のLEDが消灯する。3秒後、選んだスイッチに対応したLEDも消灯し、入金額0円(初期状態)へと戻る。商品購入ボタンは相互排斥機能がついており、いずれかのスイッチを押すと同時に、押されたスイッチ以外の入力を受け付けなくなる。

このシステムを実装したラダー図を図4.10に示す。

\subsection{完全順序回路(8回路)}
\label{sec:org1441445}
このシステムは、\ref{sec:org5023776}にスイッチ、LEDを4つずつ追加し8回路に拡張したものである。基本動作は同じであるが、規模が大きくラダー図が見づらいものになりやすいことを考慮し、上位4bit、下位4bitに分けて記述した(コメントアウト参照)

このシステムを実装したラダー図を図4.11に示す。

\section{課題}
\label{sec:orgdd2e7f3}
\subsection{使用したPLC(KV-1000)の機能について調査せよ}
\label{sec:org0ce7337}
KV-1000の機能について表\ref{tab:org909d73c}に示す \cite{kv1000} 。

\begin{table}[htbp]
\caption{\label{tab:org909d73c}
KV-1000の機能}
\centering
\begin{tabular}{|c|c|}
\hline
機能項目 & 内容\\
\hline
\hline
位置決めパルス出力 & 2点\\
自己診断機能 & CPU 異常、RAM 異常、その他\\
CPU ユニット入出力 & 入力：16 点 出力：8 点\\
プログラムメモリ & フラッシュROM 10万回書き換え可能\\
バッテリ & 5年\\
\hline
\end{tabular}
\end{table}

\subsection{キーエンス以外にPLCの製造販売を行っている会社について2社挙げ、同程度の性能の製品について調査・比較せよ}
\label{sec:org454a2ff}
今回私はPLC製造販売企業2社として
\begin{itemize}
\item 三菱電機\cite{fx3s2}
\item オムロン\cite{cp1l2,cp1l1}
\end{itemize}

を挙げる。

その2社+キーエンス(KV-1000)の3製品の比較表を表\ref{tab:org0a33ef5}に示す。

\begin{table}[htbp]
\caption{\label{tab:org0a33ef5}
PLCユニット比較表}
\centering
\begin{tabular}{|c|c|c|c|}
\hline
メーカー名 & 三菱 & オムロン & キーエンス\\
\hline
型番 & FX3S & CP1L-EL20DR-D & KV-1000\\
\hline
入出力ユニット & 入力：16 点 出力：14 点 & 入力：12 点 出力：8 点 & 入力：16 点 出力：8 点\\
処理速度 & 210 [ns] & 550 [ns] & 25 [ns]\\
プログラム言語 & リレーシンボル+ステップラダー & ラダーチャート方式 & ラダー,KVスクリプト,ニモニック\\
開発ソフトウェア & iQ Works & CX-Programmer & KV-Studio\\
価格 & 12,799円 & 85,000円 & 入手困難\\
\hline
\end{tabular}
\end{table}

まとめた主な結果から、KV-1000に近い性能の製品を今から手に入れようとするならば、三菱製のものを選ぶのがコストパフォーマンスが良いと考えられる。

\subsection{KV-Studioを用いてラダー図を作成する際に感じた、より便利にシステム構築を行うためにあると良い機能について2つ挙げよ}
\label{sec:org86adf5c}
本実験を通してKV-Studioの基本的な使い方を学んだが、その中で感じたより便利にシステム構築を行うためにあると良い点は
\begin{itemize}
\item GUI操作が多く、マウスとキーボードの持ち替えが頻発していたので、CUI操作ができれば良い
\item シリアル通信でリアルタイムに状況確認する機能が備わっているが、ほぼ同時に起きる処理について追えないため、ログを見やすい位置に出せるとデバッグがしやすい
\end{itemize}
の2点である。

\bibliographystyle{plain}
\bibliography{reference}
\end{document}
