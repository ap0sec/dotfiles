<?php

namespace App\Http\Controllers;

use App\Answer;
use Illuminate\Http\Request;

class StartController extends Controller
{
    public function index()
    {
        return view('start');
    }

    public function post(Request $request)
    {

        $id = substr(base_convert(md5(uniqid()), 16, 36), 0, 8);
        $branch = rand(0,1);
        $data = [
            'answer_id' => $id ,
            'age' => $request->age ,
            'gender' => $request->gender ,
            'pic_yn' => $request->pic ,
            'branch' => $branch ,
        ];
        
        $answer = new Answer;
        $answer->fill($data)->save();

        $route_param = [
            'id' => $id ,
            'branch' => $branch ,
            'time' => 0
        ];
        
        return redirect()->route('contents', $route_param);
    }

}
