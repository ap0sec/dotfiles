FROM ubuntu:bionic

MAINTAINER ap0sec <apo.t.laboratory@gmail.com>

ARG MYSQL_ROOT_PASSWORD

RUN echo "mysql-server mysql-server/root_password password $MYSQL_ROOT_PASSWORD" | debconf-set-selections && \
    echo "mysql-server mysql-server/root_password_again password $MYSQL_ROOT_PASSWORD" | debconf-set-selections && \
    apt-get -y install mysql-server

RUN groupadd -r mysql && useradd -r -g mysql mysql

ADD ./conf/mariadb.cnf /etc/mysql/

RUN chown mysql:mysql /var/lib/mysql

ENTRYPOINT ["mysqld_safe"]
